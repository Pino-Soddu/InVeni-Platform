<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:viewmodels="clr-namespace:Inveni.App.ViewModels"
             xmlns:modelli="clr-namespace:Inveni.App.Modelli"
             xmlns:controls="clr-namespace:Inveni.App.Controls"
             x:Class="Inveni.App.Pages.VicinoAMePage"
             NavigationPage.HasNavigationBar="False">

    <!-- RISORSE LOCALI -->
    <ContentPage.Resources>
        <ResourceDictionary>
            <!-- CONVERTER PER ACCORDION -->
            <viewmodels:BoolToArrowConverter x:Key="BoolToArrow" />
            <viewmodels:TabColorConverter x:Key="TabColor" />

            <!-- CONVERTER ESISTENTI -->
            <viewmodels:MaggioreDiZeroConverter x:Key="MaggioreDiZero" />
            <viewmodels:InverseBooleanConverter x:Key="InverseBool" />
            <viewmodels:IntToInverseBoolConverter x:Key="IntToInverseBool" />
        </ResourceDictionary>
    </ContentPage.Resources>

    <!-- LAYOUT PRINCIPALE -->
    <RefreshView IsRefreshing="{Binding IsRefreshing}"
                 Command="{Binding RefreshCommand}"
                 RefreshColor="#2196F3">

        <Grid>

            <!-- CONTENUTO PRINCIPALE (accordion e card) -->
            <ScrollView Grid.Row="1">
                <VerticalStackLayout Spacing="20" Padding="10">

                    <!-- SEZIONE 1: GIOCA ORA -->
                    <VerticalStackLayout Spacing="8">
                        <!-- HEADER CLICCABILE -->
                        <Border BackgroundColor="#E3F2FD"
                                StrokeShape="RoundRectangle 8"
                                Padding="15,10"
                                Margin="0,0,0,5">
                            <Grid ColumnDefinitions="*, Auto">
                                <HorizontalStackLayout Grid.Column="0" Spacing="8">
                                    <Label Text="GIOCA ORA"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="#2196F3" />
                                    <Label Text="{Binding CacceAttive.Count, StringFormat='Â· {0} cacce'}"
                                           FontSize="16"
                                           TextColor="#666666"
                                           VerticalTextAlignment="Center" />
                                </HorizontalStackLayout>

                                <Label Grid.Column="1"
                                       Text="{Binding IsGiocaOraEspanso, Converter={StaticResource BoolToArrow}}"
                                       FontSize="20"
                                       TextColor="#2196F3"
                                       VerticalOptions="Center">
                                    <Label.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding ToggleGiocaOraCommand}" />
                                    </Label.GestureRecognizers>
                                </Label>
                            </Grid>
                        </Border>

                        <!-- CONTENUTO ESPANSO -->
                        <VerticalStackLayout IsVisible="{Binding IsGiocaOraEspanso}"  Spacing="12">

                            <!-- MESSAGGIO SE NESSUNA CACCIA -->
                            <Border IsVisible="{Binding CacceAttive.Count, Converter={StaticResource IntToInverseBool}}">
                                <Label Text="Nessuna caccia disponibile al momento"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="#FF9800"
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center" />
                            </Border>

                            <!-- LISTA CARD COMPLETE -->
                            <VerticalStackLayout BindableLayout.ItemsSource="{Binding CacceAttive}"
                                                 Spacing="15">
                                <BindableLayout.ItemTemplate>
                                    <DataTemplate x:DataType="modelli:Gioco">
                                        <!-- CARD COMPLETA -->
                                        <Border StrokeShape="RoundRectangle 12"
                                                BackgroundColor="White"
                                                Stroke="{Binding ColoreBordoStato}"
                                                StrokeThickness="2"
                                                Padding="0">
                                            <Grid RowDefinitions="160, Auto, Auto, Auto" 
                                                  RowSpacing="0">

                                                <!-- IMMAGINE 16:9 + BADGE TOP -->
                                                <Grid Grid.Row="0">
                                                    <Image Source="{Binding FotoSemplice}" 
           Aspect="AspectFill" 
           HeightRequest="160" />

                                                    <Border IsVisible="{Binding IsTopCaccia}"
            BackgroundColor="#99000000"
            Stroke="White"
            StrokeThickness="1"
            StrokeShape="RoundRectangle 6"
            Padding="8,4"
            HorizontalOptions="End"
            VerticalOptions="Start"
            Margin="10">
                                                        <Label Text="TOP" 
               FontSize="12" 
               FontAttributes="Bold" 
               TextColor="White" 
               VerticalOptions="Center" 
               HorizontalOptions="Center" />
                                                    </Border>
                                                </Grid>

                                                <!-- RIGA 1: NOME + Pulsante SCHEDA -->
                                                <Grid Grid.Row="1"
                                                      ColumnDefinitions="*, Auto"
                                                      Padding="15,12,15,8">

                                                    <!-- TITOLO (sinistra) -->
                                                    <Label Grid.Column="0"
                                                       Text="{Binding name}"
                                                       FontSize="18"
                                                       FontAttributes="Bold"
                                                       TextColor="#1A237E"
                                                       LineBreakMode="TailTruncation"
                                                       MaxLines="2" />

                                                    <!-- PULSANTE DETTAGLI (destra) -->
                                                    <Border Grid.Column="1"
                                                        BackgroundColor="#4CAF50"
                                                        Stroke="White"
                                                        StrokeThickness="2"
                                                        StrokeShape="RoundRectangle 6"
                                                        Padding="10,6"
                                                        HorizontalOptions="End"
                                                        VerticalOptions="Center">

                                                        <Border.GestureRecognizers>
                                                            <TapGestureRecognizer Tapped="OnDettagliTapped" />
                                                        </Border.GestureRecognizers>

                                                        <Label Text="DETTAGLI" 
                                                           FontSize="12" 
                                                           FontAttributes="Bold" 
                                                           TextColor="White" 
                                                           VerticalOptions="Center" 
                                                           HorizontalOptions="Center" />
                                                    </Border>
                                                </Grid>

                                                <!-- RIGA 2: COMUNE + ORGANIZZATORE -->
                                                <VerticalStackLayout Grid.Row="2"
                                                                     Padding="15,0,15,8"
                                                                     Spacing="4">
                                                    <Label Text="{Binding TestoComune}"
                                                           FontSize="14"
                                                           FontAttributes="Bold"
                                                           TextColor="#2196F3"
                                                           LineBreakMode="TailTruncation" />

                                                    <Label Text="{Binding TestoOrganizzatore}"
                                                           FontSize="13"
                                                           TextColor="#666666"
                                                           LineBreakMode="TailTruncation" />
                                                </VerticalStackLayout>

                                                <!-- RIGA 3: INFO ATTIVITÃ€ -->
                                                <Grid Grid.Row="3"
                                                    ColumnDefinitions="*, *, *"
                                                    Padding="15,5,15,10">

                                                    <!-- COLONNA 0: TAPPE (allineamento a SINISTRA) -->
                                                    <HorizontalStackLayout Grid.Column="0"
                                                        Spacing="3"
                                                        HorizontalOptions="Start"
                                                        VerticalOptions="Center">
                                                        <Label Text="ðŸš©"
                                                            FontSize="12"
                                                            VerticalOptions="Center" />
                                                        <Label Text="{Binding numTappeCaccia, StringFormat='{0} tappe'}"
                                                            FontSize="12"
                                                            FontAttributes="Bold"
                                                            TextColor="#4CAF50"
                                                            VerticalOptions="Center"
                                                            LineBreakMode="NoWrap" />
                                                    </HorizontalStackLayout>

                                                    <!-- COLONNA 1: LUNGHEZZA (allineamento al CENTRO) -->
                                                    <HorizontalStackLayout Grid.Column="1"
                                                        Spacing="3"
                                                        HorizontalOptions="Center"
                                                        VerticalOptions="Center">
                                                        <Label Text="ðŸ“"
                                                            FontSize="12"
                                                            VerticalOptions="Center" />
                                                        <Label Text="{Binding TestoLunghezzaSenzaIcona}"
                                                            FontSize="12"
                                                            FontAttributes="Bold"
                                                            TextColor="#FF9800"
                                                            VerticalOptions="Center"
                                                            LineBreakMode="NoWrap" />
                                                    </HorizontalStackLayout>

                                                    <!-- COLONNA 2: PERIODO (allineamento a DESTRA) -->
                                                    <HorizontalStackLayout Grid.Column="2"
                                                        Spacing="3"
                                                        HorizontalOptions="End"
                                                        VerticalOptions="Center">
                                                        <Label Text="ðŸ—“ï¸"
                                                            FontSize="12"
                                                            VerticalOptions="Center" />
                                                        <Label Text="{Binding TestoPeriodoMesi}"
                                                            FontSize="11"
                                                            FontAttributes="Bold"
                                                            TextColor="#9C27B0"
                                                            VerticalOptions="Center"
                                                            LineBreakMode="TailTruncation"
                                                            MaxLines="1" />
                                                    </HorizontalStackLayout>
                                                </Grid>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </BindableLayout.ItemTemplate>
                            </VerticalStackLayout>
                        </VerticalStackLayout>
                    </VerticalStackLayout>

                    <!-- SEZIONE 2: IN PROGRAMMA -->
                    <VerticalStackLayout Spacing="8">
                        <Border BackgroundColor="#E8F5E8"
                                StrokeShape="RoundRectangle 8"
                                Padding="15,10"
                                Margin="0,0,0,5">
                            <Grid ColumnDefinitions="*, Auto">
                                <HorizontalStackLayout Grid.Column="0" Spacing="8">
                                    <Label Text="IN PROGRAMMA"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="#4CAF50" />
                                    <Label Text="{Binding CacceProgrammate.Count, StringFormat='Â· {0} cacce'}"
                                           FontSize="16"
                                           TextColor="#666666"
                                           VerticalTextAlignment="Center" />
                                </HorizontalStackLayout>
                                <Label Grid.Column="1"
                                       Text="{Binding IsInProgrammaEspanso, Converter={StaticResource BoolToArrow}}"
                                       FontSize="20"
                                       TextColor="#4CAF50"
                                       VerticalOptions="Center">
                                    <Label.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding ToggleInProgrammaCommand}" />
                                    </Label.GestureRecognizers>
                                </Label>
                            </Grid>
                        </Border>

                        <VerticalStackLayout IsVisible="{Binding IsInProgrammaEspanso}" Spacing="12">
                            <!-- MESSAGGIO SE NESSUNA CACCIA -->
                            <Border IsVisible="{Binding CacceProgrammate.Count, Converter={StaticResource IntToInverseBool}}"
                                    BackgroundColor="#FFF3E0"
                                    StrokeShape="RoundRectangle 8"
                                    Padding="20"
                                    Margin="0,10">
                                <Label Text="Nessuna caccia in programma"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="#FF9800"
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center" />
                            </Border>

                            <!-- LISTA CARD COMPLETE (IDENTICA A GIOCA ORA) -->
                            <VerticalStackLayout BindableLayout.ItemsSource="{Binding CacceProgrammate}"
                                                 Spacing="15">
                                <BindableLayout.ItemTemplate>
                                    <DataTemplate x:DataType="modelli:Gioco">
                                        <!-- CARD IDENTICA A GIOCA ORA -->
                                        <Border StrokeShape="RoundRectangle 12"
                                                BackgroundColor="White"
                                                Stroke="{Binding ColoreBordoStato}"
                                                StrokeThickness="2"
                                                Padding="0">
                                            <Grid RowDefinitions="160, Auto, Auto, Auto" 
                                                  RowSpacing="0">

                                                <!-- IMMAGINE 16:9 + BADGE TOP -->
                                                <Grid Grid.Row="0">
                                                    <Image Source="{Binding FotoSemplice}" 
           Aspect="AspectFill" 
           HeightRequest="160" />

                                                    <Border IsVisible="{Binding IsTopCaccia}"
            BackgroundColor="#99000000"
            Stroke="White"
            StrokeThickness="1"
            StrokeShape="RoundRectangle 6"
            Padding="8,4"
            HorizontalOptions="End"
            VerticalOptions="Start"
            Margin="10">
                                                        <Label Text="TOP" 
               FontSize="12" 
               FontAttributes="Bold" 
               TextColor="White" 
               VerticalOptions="Center" 
               HorizontalOptions="Center" />
                                                    </Border>
                                                </Grid>

                                                <!-- RIGA 1: NOME + Pulsante SCHEDA -->
                                                <Grid Grid.Row="1"
                                                      ColumnDefinitions="*, Auto"
                                                      Padding="15,12,15,8">

                                                    <!-- TITOLO (sinistra) -->
                                                    <Label Grid.Column="0"
                                                       Text="{Binding name}"
                                                       FontSize="18"
                                                       FontAttributes="Bold"
                                                       TextColor="#1A237E"
                                                       LineBreakMode="TailTruncation"
                                                       MaxLines="2" />

                                                    <!-- PULSANTE DETTAGLI (destra) -->
                                                    <Border Grid.Column="1"
                                                        BackgroundColor="#4CAF50"
                                                        Stroke="White"
                                                        StrokeThickness="2"
                                                        StrokeShape="RoundRectangle 6"
                                                        Padding="10,6"
                                                        HorizontalOptions="End"
                                                        VerticalOptions="Center">

                                                        <Border.GestureRecognizers>
                                                            <TapGestureRecognizer Tapped="OnDettagliTapped" />
                                                        </Border.GestureRecognizers>

                                                        <Label Text="DETTAGLI" 
                                                           FontSize="12" 
                                                           FontAttributes="Bold" 
                                                           TextColor="White" 
                                                           VerticalOptions="Center" 
                                                           HorizontalOptions="Center" />
                                                    </Border>
                                                </Grid>

                                                <!-- RIGA 2: COMUNE + ORGANIZZATORE -->
                                                <VerticalStackLayout Grid.Row="2"
                                                                     Padding="15,0,15,8"
                                                                     Spacing="4">
                                                    <Label Text="{Binding TestoComune}"
                                                           FontSize="14"
                                                           FontAttributes="Bold"
                                                           TextColor="#2196F3"
                                                           LineBreakMode="TailTruncation" />

                                                    <Label Text="{Binding TestoOrganizzatore}"
                                                           FontSize="13"
                                                           TextColor="#666666"
                                                           LineBreakMode="TailTruncation" />
                                                </VerticalStackLayout>

                                                <!-- RIGA 3: INFO ATTIVITÃ€ -->
                                                <Grid Grid.Row="3"
                                                    ColumnDefinitions="*, *, *"
                                                    Padding="15,5,15,10">

                                                    <!-- COLONNA 0: TAPPE (allineamento a SINISTRA) -->
                                                    <HorizontalStackLayout Grid.Column="0"
                                                        Spacing="3"
                                                        HorizontalOptions="Start"
                                                        VerticalOptions="Center">
                                                        <Label Text="ðŸš©"
                                                            FontSize="12"
                                                            VerticalOptions="Center" />
                                                        <Label Text="{Binding numTappeCaccia, StringFormat='{0} tappe'}"
                                                            FontSize="12"
                                                            FontAttributes="Bold"
                                                            TextColor="#4CAF50"
                                                            VerticalOptions="Center"
                                                            LineBreakMode="NoWrap" />
                                                    </HorizontalStackLayout>

                                                    <!-- COLONNA 1: LUNGHEZZA (allineamento al CENTRO) -->
                                                    <HorizontalStackLayout Grid.Column="1"
                                                        Spacing="3"
                                                        HorizontalOptions="Center"
                                                        VerticalOptions="Center">
                                                        <Label Text="ðŸ“"
                                                            FontSize="12"
                                                            VerticalOptions="Center" />
                                                        <Label Text="{Binding TestoLunghezzaSenzaIcona}"
                                                            FontSize="12"
                                                            FontAttributes="Bold"
                                                            TextColor="#FF9800"
                                                            VerticalOptions="Center"
                                                            LineBreakMode="NoWrap" />
                                                    </HorizontalStackLayout>

                                                    <!-- COLONNA 2: PERIODO (allineamento a DESTRA) -->
                                                    <HorizontalStackLayout Grid.Column="2"
                                                        Spacing="3"
                                                        HorizontalOptions="End"
                                                        VerticalOptions="Center">
                                                        <Label Text="ðŸ—“ï¸"
                                                            FontSize="12"
                                                            VerticalOptions="Center" />
                                                        <Label Text="{Binding TestoPeriodoMesi}"
                                                            FontSize="11"
                                                            FontAttributes="Bold"
                                                            TextColor="#9C27B0"
                                                            VerticalOptions="Center"
                                                            LineBreakMode="TailTruncation"
                                                            MaxLines="1" />
                                                    </HorizontalStackLayout>
                                                </Grid>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </BindableLayout.ItemTemplate>
                            </VerticalStackLayout>
                        </VerticalStackLayout>
                    </VerticalStackLayout>

                    <!-- SEZIONE 3: SCADUTE/DISPONIBILI -->
                    <VerticalStackLayout Spacing="8">
                        <Border BackgroundColor="#F5F5F5"
                                StrokeShape="RoundRectangle 8"
                                Padding="15,10"
                                Margin="0,0,0,5">
                            <Grid ColumnDefinitions="*, Auto">
                                <HorizontalStackLayout Grid.Column="0" Spacing="8">
                                    <Label Text="SCADUTE/DISPONIBILI"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="#666666" />
                                    <Label Text="{Binding CacceStoriche.Count, StringFormat='Â· {0} cacce'}"
                                           FontSize="16"
                                           TextColor="#666666"
                                           VerticalTextAlignment="Center" />
                                </HorizontalStackLayout>
                                <Label Grid.Column="1"
                                       Text="{Binding IsStoricheEspanso, Converter={StaticResource BoolToArrow}}"
                                       FontSize="20"
                                       TextColor="#666666"
                                       VerticalOptions="Center">
                                    <Label.GestureRecognizers>
                                        <TapGestureRecognizer Command="{Binding ToggleStoricheCommand}" />
                                    </Label.GestureRecognizers>
                                </Label>
                            </Grid>
                        </Border>

                        <VerticalStackLayout IsVisible="{Binding IsStoricheEspanso}" Spacing="12">
                            <!-- MESSAGGIO SE NESSUNA CACCIA -->
                            <Border IsVisible="{Binding CacceStoriche.Count, Converter={StaticResource IntToInverseBool}}"
                                    BackgroundColor="#FFF3E0"
                                    StrokeShape="RoundRectangle 8"
                                    Padding="20"
                                    Margin="0,10">
                                <Label Text="Nessuna caccia storica"
                                       FontSize="16"
                                       FontAttributes="Bold"
                                       TextColor="#FF9800"
                                       HorizontalOptions="Center"
                                       VerticalOptions="Center" />
                            </Border>

                            <!-- LISTA CARD COMPLETE (IDENTICA A GIOCA ORA) -->
                            <VerticalStackLayout BindableLayout.ItemsSource="{Binding CacceStoriche}"
                                                 Spacing="15">
                                <BindableLayout.ItemTemplate>
                                    <DataTemplate x:DataType="modelli:Gioco">
                                        <!-- CARD IDENTICA A GIOCA ORA -->
                                        <Border StrokeShape="RoundRectangle 12"
                                                BackgroundColor="White"
                                                Stroke="{Binding ColoreBordoStato}"
                                                StrokeThickness="2"
                                                Padding="0">
                                            <Grid RowDefinitions="160, Auto, Auto, Auto" 
                                                  RowSpacing="0">

                                                <!-- IMMAGINE 16:9 + BADGE TOP -->
                                                <Grid Grid.Row="0">
                                                    <Image Source="{Binding FotoSemplice}" 
           Aspect="AspectFill" 
           HeightRequest="160" />

                                                    <Border IsVisible="{Binding IsTopCaccia}"
            BackgroundColor="#99000000"
            Stroke="White"
            StrokeThickness="1"
            StrokeShape="RoundRectangle 6"
            Padding="8,4"
            HorizontalOptions="End"
            VerticalOptions="Start"
            Margin="10">
                                                        <Label Text="TOP" 
               FontSize="12" 
               FontAttributes="Bold" 
               TextColor="White" 
               VerticalOptions="Center" 
               HorizontalOptions="Center" />
                                                    </Border>
                                                </Grid>

                                                <!-- RIGA 1: NOME + Pulsante SCHEDA -->
                                                <Grid Grid.Row="1"
                                                      ColumnDefinitions="*, Auto"
                                                      Padding="15,12,15,8">

                                                    <!-- TITOLO (sinistra) -->
                                                    <Label Grid.Column="0"
                                                       Text="{Binding name}"
                                                       FontSize="18"
                                                       FontAttributes="Bold"
                                                       TextColor="#1A237E"
                                                       LineBreakMode="TailTruncation"
                                                       MaxLines="2" />

                                                    <!-- PULSANTE DETTAGLI (destra) -->
                                                    <Border Grid.Column="1"
                                                        BackgroundColor="#4CAF50"
                                                        Stroke="White"
                                                        StrokeThickness="2"
                                                        StrokeShape="RoundRectangle 6"
                                                        Padding="10,6"
                                                        HorizontalOptions="End"
                                                        VerticalOptions="Center">

                                                        <Border.GestureRecognizers>
                                                            <TapGestureRecognizer Tapped="OnDettagliTapped" />
                                                        </Border.GestureRecognizers>

                                                        <Label Text="DETTAGLI" 
                                                           FontSize="12" 
                                                           FontAttributes="Bold" 
                                                           TextColor="White" 
                                                           VerticalOptions="Center" 
                                                           HorizontalOptions="Center" />
                                                    </Border>
                                                </Grid>

                                                <!-- RIGA 2: COMUNE + ORGANIZZATORE -->
                                                <VerticalStackLayout Grid.Row="2"
                                                                     Padding="15,0,15,8"
                                                                     Spacing="4">
                                                    <Label Text="{Binding TestoComune}"
                                                           FontSize="14"
                                                           FontAttributes="Bold"
                                                           TextColor="#2196F3"
                                                           LineBreakMode="TailTruncation" />

                                                    <Label Text="{Binding TestoOrganizzatore}"
                                                           FontSize="13"
                                                           TextColor="#666666"
                                                           LineBreakMode="TailTruncation" />
                                                </VerticalStackLayout>

                                                <!-- RIGA 3: INFO ATTIVITÃ€ -->
                                                <Grid Grid.Row="3"
                                                    ColumnDefinitions="*, *, *"
                                                    Padding="15,5,15,10">

                                                    <!-- COLONNA 0: TAPPE (allineamento a SINISTRA) -->
                                                    <HorizontalStackLayout Grid.Column="0"
                                                        Spacing="3"
                                                        HorizontalOptions="Start"
                                                        VerticalOptions="Center">
                                                        <Label Text="ðŸš©"
                                                            FontSize="12"
                                                            VerticalOptions="Center" />
                                                        <Label Text="{Binding numTappeCaccia, StringFormat='{0} tappe'}"
                                                            FontSize="12"
                                                            FontAttributes="Bold"
                                                            TextColor="#4CAF50"
                                                            VerticalOptions="Center"
                                                            LineBreakMode="NoWrap" />
                                                    </HorizontalStackLayout>

                                                    <!-- COLONNA 1: LUNGHEZZA (allineamento al CENTRO) -->
                                                    <HorizontalStackLayout Grid.Column="1"
                                                        Spacing="3"
                                                        HorizontalOptions="Center"
                                                        VerticalOptions="Center">
                                                        <Label Text="ðŸ“"
                                                            FontSize="12"
                                                            VerticalOptions="Center" />
                                                        <Label Text="{Binding TestoLunghezzaSenzaIcona}"
                                                            FontSize="12"
                                                            FontAttributes="Bold"
                                                            TextColor="#FF9800"
                                                            VerticalOptions="Center"
                                                            LineBreakMode="NoWrap" />
                                                    </HorizontalStackLayout>

                                                    <!-- COLONNA 2: PERIODO (allineamento a DESTRA) -->
                                                    <HorizontalStackLayout Grid.Column="2"
                                                        Spacing="3"
                                                        HorizontalOptions="End"
                                                        VerticalOptions="Center">
                                                        <Label Text="ðŸ—“ï¸"
                                                            FontSize="12"
                                                            VerticalOptions="Center" />
                                                        <Label Text="{Binding TestoPeriodoMesi}"
                                                            FontSize="11"
                                                            FontAttributes="Bold"
                                                            TextColor="#9C27B0"
                                                            VerticalOptions="Center"
                                                            LineBreakMode="TailTruncation"
                                                            MaxLines="1" />
                                                    </HorizontalStackLayout>
                                                </Grid>
                                            </Grid>
                                        </Border>
                                    </DataTemplate>
                                </BindableLayout.ItemTemplate>
                            </VerticalStackLayout>
                        </VerticalStackLayout>
                    </VerticalStackLayout>

                </VerticalStackLayout>
            </ScrollView>

        </Grid>
    </RefreshView>
</ContentPage>